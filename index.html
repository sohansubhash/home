<!DOCTYPE html>
<html>
<head>
  <title>~</title>
  <meta charset="utf-8">
  <link href="style.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Space+Mono:400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
  <script src="SunCalc.js" type="text/javascript">
  </script>
</head>
<body>
  <div class="linkgarden">
    <div class="linklabel">  &gt; utility </div>
    <a class="row0" href="https://mail.google.com/"><div class="linkplant">  gmail</div></a> 
    <a class="row0" href="https://mail.protonmail.com/login"><div class="linkplant">  protonmail </div></a>
    <a class="row0" href="https://pinboard.in/u:ssbash/"><div class="linkplant">  pinboard </div></a>
    <a class="row0" href="https://github.com/"><div class="linkplant">  github </div></a>
    <a class="row0" href="https://drive.google.com/"><div class="linkplant">  drive  </div></a>

    <div class="linklabel">  &gt; distract </div>
    <a class="row1" href="https://www.reddit.com/"><div class="linkplant">  reddit </div></a> 
    <a class="row1" href="https://news.ycombinator.com/"><div class="linkplant">  hackernews </div></a> 
    <a class="row1" href="http://producthunt.com/"><div class="linkplant">  producthunt </div></a> 
    <a class="row1" href="https://twitter.com/"><div class="linkplant">  twitter </div></a> 
    <a class="row1" href="http://www.theverge.com/"><div class="linkplant">  theverge </div></a> 
    <a class="row1" href="http://wired.com/"><div class="linkplant">  wired </div></a>
    
    <div class="linklabel">  &gt; video </div>
    <a class="row2" href="https://www.youtube.com"><div class="linkplant">  youtube </div></a> 
    <a class="row2" href="https:///www.twitch.tv"><div class="linkplant">  twitch </div></a> 
    <a class="row2" href="https://vimeo.com"><div class="linkplant">  vimeo </div></a> 
    <a class="row2" href="https://netflix.com"><div class="linkplant">  netflix </div></a> 
    <a class="row2" href="https://play.hbogo.com/"><div class="linkplant">  hbogo </div></a>

    <div class="linklabel">  &gt; school </div>
    <a class="row3" href="http://inst.eecs.berkeley.edu/~cs161/sp18/"><div class="linkplant">  cs161 </div></a> 
    <a class="row3" href="https://cs162.eecs.berkeley.edu/"><div class="linkplant">  cs162 </div></a> 
    <a class="row3" href="https://www.gradescope.com/"><div class="linkplant">  gradescope </div></a>
    <a class="row3" href="https://bcourses.berkeley.edu/"><div class="linkplant">  bcourses </div></a> 
    <a class="row3" href="https://calcentral.berkeley.edu/dashboard/"><div class="linkplant">  calcentral </div></a> 
    <a class="row3" href="https://piazza.com/"><div class="linkplant">  piazza </div></a>

    <div class="succulent" id="daysleft" title="Days left in the week : month : year"></div>
    <div class="succulent" id="solar" title="sunrise/sunset time"></div>
    <div class="succulent" id="leafsearch" title="sunrise/sunset time">
      <form autocomplete="off" id="js-search-form" >
        <input autofocus="" id="js-search-input" type="search">
      </form>
    </div>
  </div>

  <script type="text/javascript">
      const DAY = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
const latitude = 37.8719; // Berkeley Lat/Long
const longitude = -122.2585;

var today = new Date();
var sols = SunCalc.getTimes(today,  latitude, longitude)

var diffweek = Math.round(Math.abs((6 - today.getDay()))); //excuding today
var diffmonth = Math.round(Math.abs((today.getTime() - nextMonth(today).getTime()) / (DAY)));
var diffyear = Math.round(Math.abs((today.getTime() - nextYear(today).getTime()) / (DAY)));

var sunrise = sols.sunrise;
var sunset = sols.sunset;

var soldate = sunrise;
var soltext = "sunrise: ";
if(today > sunrise && today < sunset){
          soldate = sunset;
           soltext = "sunset: " ;
}
console.log(diffweek, diffmonth, diffyear);

function nextMonth(date) {
    return new Date(date.getFullYear(), date.getMonth() + 1, 0);
}

function nextYear(date) {
    return new Date(date.getFullYear() + 1, 0, 0);
}

function display_solar(date, text) {
    document.getElementById("solar").innerHTML = text + date.getHours() + ":" + date.getMinutes();
}

function display_daysleft(week, month, year) {
    document.getElementById("daysleft").innerHTML = week + " : " + month + " : " + year;
}

display_solar(soldate, soltext);
display_daysleft(diffweek, diffmonth, diffyear);
//  bcourses : b
// calcentral cs161 cs162 
// drive : d
// github gmail gradescope 
// hackernews hbogo 
// netflix 
// piazza pinboard producthunt protonmail 
// reddit 
// twitter twitch 
// theverge vimeo 
// wired 
// youtube
   var config = {
     commands: [
//utility
         { key: 'd', name: 'Drive', url: 'https://drive.google.com/drive', search: '/search?q=' },
         { key: 'gh', name: 'GitHub', url: 'https://github.com', search: '/search?q=' },
         { key: 'g', name: 'Gmail', url: 'https://mail.google.com', search: '/#search/text=' },
         { key: 'pm', name: 'Protonmail', url: 'https://drive.google.com/drive', search: '/search?q=' },
         { key: 'p', name: 'Pinboard', url: 'https://pinboard.in/', search: '/search/u:ssbash/?query=' },
       //distract
         { key: 'h', name: 'Hacker News', url: 'https://hn.algolia.com', search: '/?query=' },
         { key: 'ph', name: 'Product Hunt', url: 'https://www.producthunt.com', search: '/search?q=' },
         { key: 'r', name: 'Reddit', url: 'https://www.reddit.com', search: '/search?q=' },
         { key: 't', name: 'Twitter', url: 'https://twitter.com', search: '/search?q=' },
         { key: 'v', name: 'Verge', url: 'https://www.theverge.com', search: '/search?q=' },
         { key: 'w', name: 'Wired', url: 'https://wired.com', search: '/search?q=' },
       //video
         { key: 'n', name: 'Netflix', url: 'https://netflix.com', search: '/search?q=' },
         { key: 'tw', name: 'Twitch', url: 'https://www.twitch.tv/directory/following' },
         { key: 'y', name: 'YouTube', url: 'https://www.youtube.com', search: '/results?search_query=' },
         { key: 'vm', name: 'Vimeo', url: 'https://vimeo.com', search: '/browse-movies/' },
         { key: 'hbo', name: 'HBOGO', url: 'play.hbogo.com', search: '/browse-movies/' },
         //school
         { key: 'pi', name: 'Piazza', url: 'https://piazza.com', search: '/search?q=' },
         { key: 'gs', name: 'Gradescope', url: 'https://www.gradescope.com' },
         { key: 'b', name: 'Bcourses', url: 'https://bcourses.berkeley.edu'},
         { key: 'c', name: 'CalCentral', url: 'https://calcentral.berkeley.edu/dashboard/'},
     ],

     // if none of the keys are matched, this is used for searching
     defaultSearch: 'https://www.google.com/search?q=',

     // the delimiter between the key and your search query
     // e.g. to search GitHub for potatoes you'd type "g:potatoes"
     searchDelimiter: ':'
   };

     var urlRegex = /(\b(https?|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;
    var searchForm =  document.getElementById("js-search-form");
    var searchInput =  document.getElementById("js-search-input");

searchForm.addEventListener('submit', function(event){
            event.preventDefault();
            var q = searchInput.value.trim();
        var qSplit = q.split(config.searchDelimiter);
        var qIsUrl = q.match(new RegExp(urlRegex));
        var redirect = '';

        if (qIsUrl) redirect = q;
        else redirect = config.defaultSearch + encodeURIComponent(q);

        config.commands.forEach(function(command) {
            if (qSplit[0] === command.key) {

              if (qSplit[1] && command.search) {

                qSplit.shift();
                var search = encodeURIComponent(qSplit[0].trim());
                redirect = command.url + command.search + search;
              } 
              else {
                redirect = command.url;
              }
            }

          });

        window.location.href = redirect;
   } ,  false);
    </script>
</body>

</html>